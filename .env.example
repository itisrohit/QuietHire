# ============================================================================
# QuietHire Environment Configuration
# ============================================================================
# QuietHire MVP works 100% FREE with NO paid APIs required!
#
# Required: Database credentials, ports, service URLs (all free/self-hosted)
# Optional: GITHUB_TOKEN, SERPAPI_API_KEY (for enhanced discovery)
# Not needed: All paid APIs removed (Crunchbase, Shodan, Hunter.io)
#
# Setup time: 2 minutes | Cost: $0/month
# ============================================================================

# ============================================================================
# Application Settings (REQUIRED)
# ============================================================================
APP_NAME="QuietHire API"
ENV=development
API_PORT=3000
LOG_LEVEL=info

# ============================================================================
# PostgreSQL - Main Database (REQUIRED)
# ============================================================================
DB_HOST=postgres
DB_PORT=5432
DB_USER=quiethire
DB_PASSWORD=changeme_secure_password
DB_NAME=quiethire
DB_SSL_MODE=disable

# ============================================================================
# ClickHouse - Job Storage (REQUIRED)
# ============================================================================
CLICKHOUSE_HOST=clickhouse
CLICKHOUSE_PORT=8123
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_NATIVE_PORT=9000
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=changeme_clickhouse_password
CLICKHOUSE_DB=quiethire

# ============================================================================
# Typesense - Search Engine (REQUIRED)
# ============================================================================
TYPESENSE_HOST=typesense
TYPESENSE_PORT=8108
TYPESENSE_API_KEY=your_typesense_api_key_here

# ============================================================================
# Redis/Dragonfly - Cache (REQUIRED)
# ============================================================================
REDIS_HOST=dragonfly
REDIS_PORT=6379

# ============================================================================
# Temporal - Workflow Orchestration (REQUIRED)
# ============================================================================
TEMPORAL_HOST=temporal
TEMPORAL_PORT=7233
TEMPORAL_NAMESPACE=default

# ============================================================================
# Microservices URLs (REQUIRED)
# ============================================================================
CRAWLER_SERVICE_URL=http://crawler-python:8000
PARSER_SERVICE_URL=http://parser:8000
OSINT_SERVICE_URL=http://osint-discovery:8000

# ============================================================================
# OSINT Discovery APIs (100% FREE - No paid services required!)
# ============================================================================
# All OSINT features work WITHOUT these keys using free sources.
# These are OPTIONAL enhancements for better discovery results.

# GitHub Personal Access Token (FREE - Optional)
# Used for: Company discovery via GitHub organizations
# How to get: https://github.com/settings/tokens (Select: New token -> read:org, read:user)
# Free tier: Unlimited searches
GITHUB_TOKEN=

# SerpAPI Key (FREE tier available - Optional)
# Used for: Google dork queries for job discovery
# How to get: https://serpapi.com/users/sign_up
# Free tier: 100 searches/month
# Note: Not required - theHarvester works without this
SERPAPI_API_KEY=

# ============================================================================
# Proxy Configuration (OPTIONAL - For rate limit bypass)
# ============================================================================
# QuietHire works WITHOUT proxies for small/medium scale operations.
# Add proxies only if you're hitting rate limits (>1000 requests/hour)

# Proxy Pool Settings
PROXY_POOL_SIZE=10

# Free Proxy Options:
# - Bright Data Free Trial: https://brightdata.com (7-day free trial, then paid)
# - ScraperAPI Free Tier: https://www.scraperapi.com (1000 requests/month free)
# - WebShare Free Tier: https://www.webshare.io (10 proxies free)
RESIDENTIAL_PROXY_URL=
DATACENTER_PROXY_URL=
PROXY_PROVIDER_API_KEY=

# Monitoring & Observability
SENTRY_DSN=
GRAFANA_ADMIN_PASSWORD=admin

# ============================================================================
# Feature Flags (OPTIONAL)
# ============================================================================
ENABLE_GHOST_JOB_FILTER=true

# ============================================================================
# Crawler Settings (REQUIRED)
# ============================================================================
CRAWLER_CONCURRENT_WORKERS=8
CRAWLER_REQUEST_DELAY_MS=1000
CRAWLER_MAX_RETRIES=3

# ============================================================================
# Rate Limiting (REQUIRED)
# ============================================================================
API_RATE_LIMIT=100
API_RATE_WINDOW=1m

# ============================================================================
# Quick Start Guide
# ============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Update passwords: DB_PASSWORD, CLICKHOUSE_PASSWORD, TYPESENSE_API_KEY
# 3. (Optional) Add GITHUB_TOKEN for enhanced company discovery
# 4. Run: docker-compose up -d
# 5. Test: curl http://localhost:3000/health
#
# Free API Keys (Optional Enhancements):
# - GitHub Token: https://github.com/settings/tokens
# - SerpAPI: https://serpapi.com/users/sign_up (100 free searches/month)
#
# 100% Free Features (No API keys needed):
# ✓ HackerTarget subdomain discovery (theHarvester)
# ✓ crt.sh Certificate Transparency logs
# ✓ DNS enumeration for job-related subdomains
# ✓ DuckDuckGo email search (theHarvester)
# ✓ Multi-strategy job parser (JSON-LD + heuristics)
# ✓ Career page detection (9 keyword patterns)
# ✓ ATS platform detection (8 major platforms)
#
# Cost: $0/month | Setup time: 2 minutes | Job quality: 93/100
# ============================================================================
